@using TSM.Data.ModelViews
@using TSM.DataAccess
@using TSM.Services


@model LeaveWrapper

@inject LeaveManager _leaveManager

@{
	Layout = "~/Views/Shared/CustomLayout.cshtml";
}


@{
    Layout = null;
}

<!DOCTYPE html>



<html>
<head>
	<meta name="viewport" content="width=device-width" />
	<link href="~/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
	<link href="~/DatePicker/css/bootstrap-datepicker.css" rel="stylesheet" />
	<title>Timesheet</title>
</head>
<body>
<<<<<<< HEAD
	<fieldset>
		<button data-toggle="modal" data-target="#SubmitLeaveFormMD" type="button" class="btn btn-sm btn-primary btn-create">Add</button>

		<div class="esconde" id="opdRetro">
			<table class="table table-striped table-hover ">
				<thead>
					<tr class="bg-primary">
						<th>No.</th>
						<th>User Name</th>
						<th>Approved Date</th>
						<th>Leave Type</th>
						<th>Work Shift</th>
						<th>From Date</th>
						<th>To Date</th>
						<th>Submitted Date</th>
						<th>State</th>
						<th>Detail</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					@{
						if (Model != null)
						{
							int i = 1;
							foreach (var item in Model.LeaveVM)
							{

								<tr>

									<td>@i.ToString()</td>

									<td>@item.UserName</td>

									@if (item.State == TSM.Data.Models.Leave.eState.OnQueue)
									{
										<td>On Queue</td>
									}
									else
									{
										<td> @item.ApprovedDate </td>
									}


									<td>@item.LeaveType</td>

									<td>@item.WorkShift</td>

									<td>@item.FromDate</td>

									<td>@item.ToDate</td>

									<td>@item.SubmitedDate</td>

									@if (item.State == TSM.Data.Models.Leave.eState.OnQueue)
									{
										<td>On Queue</td>
									}
									else if (item.State == TSM.Data.Models.Leave.eState.Approved)
									{
										<td>Approved</td>
									}
									else
									{
										<td>Approved</td>
									}

									<td><a href="#">View detail</a></td>

									<th>

										<a href="#" class="glyphicon glyphicon-ok">Approve</a>
										<a href="#" class="glyphicon glyphicon-remove">Reject</a>
									</th>
								</tr>
								i++;
							}

						}
					}
			</table>
		</div>
	</fieldset>

	<!--popup form-->
	<div class="modal fade" id="SubmitLeaveFormMD" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Close</button>
					<h4 class="modal-title" id="myModalLabel">Leave of absence form</h4>
				</div>
				<form id="SubmitLeaveForm" method="post" asp-controller="Manage" asp-action="LeaveSubmit" class="form-horizontal" role="form">

					<div class="form-group">
						<label asp-for="LeaveFormVM.FromDate" class="col-lg-3 control-label"></label>
						<div class="col-lg-8">
							<input type="text" asp-for="LeaveFormVM.FromDate" class="form-control datepicker">
							<span asp-validation-for="LeaveFormVM.FromDate" class="text-danger" />
						</div>
					</div>

					<div class="form-group">
						<label asp-for="LeaveFormVM.ToDate" class="col-lg-3 control-label"></label>
						<div class="col-lg-8">
							<input type="text" asp-for="LeaveFormVM.ToDate" class="form-control datepicker">
							<span asp-validation-for="LeaveFormVM.ToDate" class="text-danger" />
						</div>
					</div>

					<div class="form-group">
						<label asp-for="LeaveFormVM.WorkShift" class="col-lg-3 control-label"></label>
						<div class="col-md-8">
							<select asp-for="LeaveFormVM.WorkShift" id="selectbasic" class="form-control">
								<option value="0">AM</option>
								<option value="1">PM</option>
								<option value="2">All day</option>
							</select>
						</div>
					</div>
					<div class="form-group">
						<label asp-for="LeaveFormVM.LeaveTypeID" class="col-lg-3 control-label"></label>
						<div class="col-md-8">
							<select asp-for="LeaveFormVM.LeaveTypeID" id="selectbasic" class="form-control">
								@{
									foreach (var type in await _leaveManager.GetLeaveType())
									{
										<option value="@type.ID">@type.LeaveName</option>
									}
								}
							</select>
						</div>
					</div>

					<div class="form-group">
						<label asp-for="LeaveFormVM.Note" class="col-md-3 control-label"></label>
						<div class="col-md-8">
							<input asp-for="LeaveFormVM.Note" class="form-control" value="" type="text" />
							<span asp-validation-for="LeaveFormVM.Note" class="text-danger" />
						</div>
					</div>


					<div class="form-group">
						<label class="col-md-3 control-label"></label>
						<div class="col-md-8">
							<input class="btn btn-primary" value="Submit" type="submit" />
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

	<script src="~/jquery-3.1.0.js"></script>
	<script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
	<script src="~/DatePicker/js/bootstrap-datepicker.js"></script>
	<script src="~/Jq-validation/dist/jquery.validate.js"></script>
	<script src="~/Jq-validation/dist/additional-methods.js"></script>
	<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.min.js"></script>
	<script src="https://ajax.aspnetcdn.com/ajax/jquery.validation.unobtrusive/3.2.6/jquery.validate.unobtrusive.min.js"></script>
	<script>
		$(document).ready(function () {
			$('.datepicker').datepicker({
				format: 'dd/mm/yyyy',
				autoclose: true,
			});
		});
	</script>
=======
    <fieldset>
        <button data-toggle="modal" data-target="#SubmitLeaveFormMD" type="button" class="btn btn-sm btn-primary btn-create">Add</button>

        <div class="esconde" id="opdRetro">
            <table class="table table-striped table-hover ">
                <thead>
                    <tr class="bg-primary">
                        <th>No.</th>
                        <th>User Name</th>
                        <th>Approved Date</th>
                        <th>Leave Type</th>
                        <th>Work Shift</th>
                        <th>From Date</th>
                        <th>To Date</th>
                        <th>Submitted Date</th>
                        <th>State</th>
                        <th>Detail</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        int i = 1;
                        foreach (var item in Model.LeaveVM)
                        {

                            <tr>

                                <td>@i.ToString()</td>

                                <td>@item.UserName</td>

                                @if (item.State == TSM.Data.Models.Leave.eState.OnQueue)
                                {
                                    <td>On Queue</td>
                                }
                                else
                                {
                                    <td> @item.ApprovedDate </td>
                                }


                                <td>@item.LeaveType</td>

                                <td>@item.WorkShift</td>

                                <td>@item.FromDate</td>

                                <td>@item.ToDate</td>

                                <td>@item.SubmitedDate</td>

                                @if (item.State == TSM.Data.Models.Leave.eState.OnQueue)
                                {
                                    <td>On Queue</td>
                                }
                                else if (item.State == TSM.Data.Models.Leave.eState.Approved)
                                {
                                    <td>Approved</td>
                                }
                                else
                                {
                                    <td>Approved</td>
                                }

                                <td><a href="#">View detail</a></td>

                                <th>

                                    <a href="#" class="glyphicon glyphicon-ok">Approve</a>
                                    <a href="#" class="glyphicon glyphicon-remove">Reject</a>
                                </th>
                            </tr>
                            i++;
                        }

                    }
            </table>
        </div>
    </fieldset>

    <!--popup form-->
    <div class="modal fade" id="SubmitLeaveFormMD" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Close</button>
                    <h4 class="modal-title" id="myModalLabel">Leave of absence form</h4>
                </div>
                <form id="SubmitLeaveForm" method="post" asp-controller="Manage" asp-action="LeaveSubmit" class="form-horizontal" role="form">

                    <div class="form-group">
                        <label asp-for="LeaveFormVM.FromDate" class="col-lg-3 control-label"></label>
                        <div class="col-lg-8">
                            <input type="text" asp-for="LeaveFormVM.FromDate" class="form-control datepicker">
                            <span asp-validation-for="LeaveFormVM.FromDate" class="text-danger" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label asp-for="LeaveFormVM.ToDate" class="col-lg-3 control-label"></label>
                        <div class="col-lg-8">
                            <input type="text" asp-for="LeaveFormVM.ToDate" class="form-control datepicker">
                            <span asp-validation-for="LeaveFormVM.ToDate" class="text-danger" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label asp-for="LeaveFormVM.WorkShift" class="col-lg-3 control-label"></label>
                        <div class="col-md-8">
                            <select asp-for="LeaveFormVM.WorkShift" id="selectbasic" class="form-control">
                                <option value="0">AM</option>
                                <option value="1">PM</option>
                                <option value="2">All day</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label asp-for="LeaveFormVM.LeaveTypeID" class="col-lg-3 control-label"></label>
                        <div class="col-md-8">
                            <select asp-for="LeaveFormVM.LeaveTypeID" id="selectbasic" class="form-control">
                                @{
                                    foreach (var type in await _leaveManager.GetLeaveTypeAsync())
                                    {
                                        <option value="@type.ID">@type.LeaveName</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label asp-for="LeaveFormVM.Note" class="col-md-3 control-label"></label>
                        <div class="col-md-8">
                            <input asp-for="LeaveFormVM.Note" class="form-control" value="" type="text" />
                            <span asp-validation-for="LeaveFormVM.Note" class="text-danger" />
                        </div>
                    </div>


                    <div class="form-group">
                        <label class="col-md-3 control-label"></label>
                        <div class="col-md-8">
                            <input class="btn btn-primary" value="Submit" type="submit" />
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="~/jquery-3.1.0.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
    <script src="~/DatePicker/js/bootstrap-datepicker.js"></script>
    <script src="~/Jq-validation/dist/jquery.validate.js"></script>
    <script src="~/Jq-validation/dist/additional-methods.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validation.unobtrusive/3.2.6/jquery.validate.unobtrusive.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.datepicker').datepicker({
                format: 'dd/mm/yyyy',
                autoclose: true,
            });
        });
    </script>
>>>>>>> 87430539cea47766634b6ad2eaa32bb52d9da164
</body>
</html>
