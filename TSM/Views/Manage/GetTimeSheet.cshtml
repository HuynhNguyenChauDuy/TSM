@using TSM.Data.ModelViews
@using TSM.DataAccess
@using TSM.Services


@model LeaveWrapper

@inject LeaveManager _leaveManager

@{
	ViewData["Title"] = "TimeSheet Manager";
	Layout = "~/Views/Shared/CustomLayout.cshtml";
}
@section Customcss{
    <link href="~/DatePicker/css/bootstrap-datepicker.css" rel="stylesheet" />
}

@section jvscript{
    <script src="~/DatePicker/js/bootstrap-datepicker.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validation.unobtrusive/3.2.6/jquery.validate.unobtrusive.min.js"></script>
    <script>
        var curDate = new Date();
        curDate.setDate(curDate.getDate() - 1);

        $(document).ready(function () {
            $('.datepicker').datepicker({
                format: 'dd/mm/yyyy',
                autoclose: true,
                startDate: curDate
            });
        });
    </script>
}

<!-- Content Header (Page header) -->
@*<style>
	.col-lg-8 {
		margin-left : -94px;
		margin-top : 25px;
	}
	.form-group .col-lg-3 control-label {
		margin-left : -16px 
	}
	
	.form-control datepicker {
		margin-left: 18px;
		margin-top:2px;

	}
	.col-lg-3 control-label {
		margin-left: -16px;
	}
	#selectbasic {
		margin-top: 30px;
		margin-left: -92px;
	}
	div.form-group {
		margin-left: -48px ;
	}
	.col-md-8 input.form-control {
		margin-top: 28px;
		margin-left: -90px;
	}
	.col-md-8 textarea {
		margin-top: 30px;
		margin-left: -87px;
	}
	
	
		
</style>*@
<section class="content-header">
	<h1>
		TIMEHSHEET MANAGER
		<button data-toggle="modal" data-target="#SubmitLeaveFormMD" type="button" class="btn btn-sm btn-primary btn-create">New Submit</button>
	</h1>
</section>
<!-- Main content -->
<section class="content">
	<div class="row">
		<div class="col-xs-12">

			<!-- /.box -->
			<div class="box">
				<div class="box-header">
					<h3 class="box-title">Leave Of Absent</h3>
				</div>
				<!-- /.box-header -->
				<div class="box-body">
					<table id="example1" class="table table-bordered table-striped">
						<thead>
							<tr>
								<th>No.</th>
								<th>User Name</th>
								<th>Approved Date</th>
								<th>Leave Type</th>
								<th>Work Shift</th>
								<th>From Date</th>
								<th>To Date</th>
								<th>State</th>
								<th>Actions</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							@{
								int i = 1;
								foreach (var item in Model.LeaveVM)
								{
									<tr>
										<td>@i.ToString()</td>
										<td>@item.UserName</td>
										@if (item.State == TSM.Data.Models.Leave.eState.Approved)
										{
											<td>@item.ApprovedDate</td>
										}
										else {<td></td> }

										<td>@item.LeaveType</td>
										<td>@item.WorkShift </td>
										<td>@item.FromDate</td>
										<td>@item.ToDate</td>
										<td>@item.State</td>
										<td>
											<a href="#" class="glyphicon glyphicon-ok">Approve</a>
											<a href="#" class="glyphicon glyphicon-remove">Reject</a>
										</td>
										<td><input type="checkbox" name="checkbox" id="checkbox"></td>
									</tr>
									i++;
								}
							}
							
						</tbody>

					</table>
				</div>
				<!-- /.box-body -->
			</div>
			<!-- /.box -->
		</div>
		<!-- /.col -->
	</div>
	<!-- /.row -->
	<!--popup form-->
	<div class="modal fade" id="SubmitLeaveFormMD" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Close</button>
					<h4 class="modal-title" id="myModalLabel"><strong>Leave of absence form</strong></h4>
				</div>
				<form role="form" id="SubmitLeaveForm" method="post" asp-controller="Manage" asp-action="LeaveSubmit">
					<div class="box-body">
						<div class="form-group">
							<label label asp-for="LeaveFormVM.FromDate"></label>
							<input type="text" asp-for="LeaveFormVM.FromDate" class="form-control datepicker">
							<span asp-validation-for="LeaveFormVM.FromDate" class="text-danger" />
						</div>

						<div class="form-group">
							<label asp-for="LeaveFormVM.ToDate"></label>
							<input type="text" asp-for="LeaveFormVM.ToDate" class="form-control datepicker">
							<span asp-validation-for="LeaveFormVM.ToDate" class="text-danger" />
						</div>

						<div class="form-group">
							<label asp-for="LeaveFormVM.WorkShift"></label>
							<div>
								<select asp-for="LeaveFormVM.WorkShift" id="selectbasic" class="form-control">
									<option value="0">AM</option>
									<option value="1">PM</option>
									<option value="2">All day</option>
								</select>
							</div>
						</div>

						<div class="form-group">
							<label asp-for="LeaveFormVM.LeaveTypeID" ></label>
							<div >
								<select asp-for="LeaveFormVM.LeaveTypeID" id="selectbasic" class="form-control">
									@{
										foreach (var type in await _leaveManager.GetLeaveTypeAsync())
										{
											<option value="@type.ID">@type.LeaveName</option>
										}
									}
								</select>
							</div>
						</div>

						<div class="form-group">
							<label>CC</label>
							<div>
								<input type="text" class="form-control">
								<span class="text-danger" />
							</div>
						</div>

						<div class="form-group">
							<label asp-for="LeaveFormVM.Note"></label>
							<div >
								<textarea asp-for="LeaveFormVM.Note" class="form-control" value="" type="text"></textarea>
								<span asp-validation-for="LeaveFormVM.Note" class="text-danger" />
							</div>
						</div>

						<div class="form-group">
							<label></label>
							<div>
								<input class="btn btn-primary" value="Submit" type="submit" />
							</div>
						</div>
						</div>
				</form>
				@*<form id="SubmitLeaveForm" method="post" asp-controller="Manage" asp-action="LeaveSubmit" class="form-horizontal" role="form">
					<div class="form-group">
						
							<label asp-for="LeaveFormVM.FromDate" class="col-lg-3 control-label"></label>
						
						
						<div class="col-lg-8">
							<input type="text" asp-for="LeaveFormVM.FromDate" class="form-control datepicker">
							<span asp-validation-for="LeaveFormVM.FromDate" class="text-danger" />
						</div>
					</div>

					<div class="form-group">
						<label asp-for="LeaveFormVM.ToDate" class="col-lg-3 control-label"></label>
						<div class="col-lg-8">
							<input type="text" asp-for="LeaveFormVM.ToDate" class="form-control datepicker">
							<span asp-validation-for="LeaveFormVM.ToDate" class="text-danger" />
						</div>
					</div>

					<div class="form-group">
						<label asp-for="LeaveFormVM.WorkShift" class="col-lg-3 control-label"></label>
						<div class="col-md-8">
							<select asp-for="LeaveFormVM.WorkShift" id="selectbasic" class="form-control">
								<option value="0">AM</option>
								<option value="1">PM</option>
								<option value="2">All day</option>
							</select>
						</div>
					</div>
					<div class="form-group">
						<label asp-for="LeaveFormVM.LeaveTypeID" class="col-lg-3 control-label"></label>
						<div class="col-md-8">
							<select asp-for="LeaveFormVM.LeaveTypeID" id="selectbasic" class="form-control">
								@{
									foreach (var type in await _leaveManager.GetLeaveTypeAsync())
									{
										<option value="@type.ID">@type.LeaveName</option>
									}
								}
							</select>
						</div>
					</div>

                    <div class="form-group">
                        <label  class="col-lg-3 control-label">CC</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control">
                            <span class="text-danger" />
                        </div>
                    </div>

					<div class="form-group">
						<label asp-for="LeaveFormVM.Note" class="col-md-3 control-label"></label>
						<div class="col-md-8">
							<textarea asp-for="LeaveFormVM.Note" class="form-control" value="" type="text"></textarea>
							<span asp-validation-for="LeaveFormVM.Note" class="text-danger" />
						</div>
					</div>

					<div class="form-group">
						<label class="col-md-3 control-label"></label>
						<div class="col-md-8">
							<input class="btn btn-primary" value="Submit" type="submit" />
						</div>
					</div>
				</form>*@
			</div>
		</div>
	</div>
</section>
